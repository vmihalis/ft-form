---
phase: 21-dashboard-hub-navigation
plan: 04
type: execute
wave: 3
depends_on: ["21-02", "21-03"]
files_modified:
  - src/components/admin/MobileNav.tsx
  - src/components/admin/Header.tsx
  - src/app/admin/layout.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Mobile users see hamburger menu instead of sidebar"
    - "Tapping hamburger opens sheet with navigation"
    - "Theme toggle and logout are accessible on both desktop and mobile"
    - "Layout adapts properly to mobile viewport"
  artifacts:
    - path: "src/components/admin/MobileNav.tsx"
      provides: "Mobile hamburger menu with sheet navigation"
      exports: ["MobileNav"]
    - path: "src/components/admin/Header.tsx"
      provides: "Shared header with ModeToggle, logout, and mobile nav"
      exports: ["AdminHeader"]
  key_links:
    - from: "src/app/admin/layout.tsx"
      to: "src/components/admin/MobileNav.tsx"
      via: "renders in header for mobile"
      pattern: "MobileNav"
    - from: "src/components/admin/MobileNav.tsx"
      to: "src/components/admin/SidebarNav.tsx"
      via: "reuses navigation items"
      pattern: "import.*SidebarNav"
---

<objective>
Complete the responsive navigation by adding mobile support with a hamburger menu and sheet overlay, plus a shared header component.

Purpose: Mobile users need access to the same navigation as desktop users. This plan creates the mobile navigation pattern using Sheet component and integrates it with a shared header that contains theme toggle, logout, and mobile menu trigger.

Output: Fully responsive admin layout that works on both desktop (sidebar) and mobile (hamburger + sheet).
</objective>

<execution_context>
@/home/memehalis/.claude/get-shit-done/workflows/execute-plan.md
@/home/memehalis/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/21-dashboard-hub-navigation/21-CONTEXT.md
@.planning/phases/21-dashboard-hub-navigation/21-RESEARCH.md
@src/components/admin/Sidebar.tsx
@src/components/admin/SidebarNav.tsx
@src/components/ui/sheet.tsx
@src/components/ui/mode-toggle.tsx
@src/app/admin/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MobileNav component with Sheet</name>
  <files>src/components/admin/MobileNav.tsx</files>
  <action>
Create the mobile navigation component that shows a hamburger menu triggering a Sheet with navigation items.

**Implementation:**

```typescript
"use client";

import { useState } from "react";
import { Menu } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  Sheet,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger
} from "@/components/ui/sheet";
import { SidebarNav } from "./SidebarNav";

export function MobileNav() {
  const [open, setOpen] = useState(false);

  return (
    <Sheet open={open} onOpenChange={setOpen}>
      <SheetTrigger asChild>
        <Button variant="ghost" size="icon" className="lg:hidden">
          <Menu className="h-5 w-5" />
          <span className="sr-only">Toggle navigation menu</span>
        </Button>
      </SheetTrigger>
      <SheetContent
        side="left"
        className="glass w-[280px] p-0"
        showCloseButton={true}
      >
        <SheetHeader className="px-4 py-4 border-b border-sidebar-border">
          <SheetTitle className="font-display">FrontierOS</SheetTitle>
        </SheetHeader>
        <nav className="py-4">
          {/* Pass onClick handler to close sheet on navigation */}
          <SidebarNav isCollapsed={false} onNavigate={() => setOpen(false)} />
        </nav>
      </SheetContent>
    </Sheet>
  );
}
```

**Key features:**
1. Only visible on mobile (lg:hidden on trigger button)
2. Uses existing Sheet component with `side="left"`
3. Glass styling on SheetContent
4. Reuses SidebarNav component (labels always visible in mobile)
5. Closes sheet when navigation item clicked

**Note:** SidebarNav will need an optional `onNavigate` prop to close the sheet. Update SidebarNav to support this:

```typescript
// In SidebarNav.tsx, add to props:
onNavigate?: () => void;

// In SidebarNavItem, add onClick to Link:
<Link href={href} onClick={onNavigate}>
```
  </action>
  <verify>
```bash
# File exists and exports MobileNav
grep -q "export function MobileNav" src/components/admin/MobileNav.tsx && echo "MobileNav exported"
# Uses Sheet component
grep -q "Sheet" src/components/admin/MobileNav.tsx && echo "Uses Sheet"
# Has lg:hidden for mobile-only
grep -q "lg:hidden" src/components/admin/MobileNav.tsx && echo "Mobile-only trigger"
```
  </verify>
  <done>
- MobileNav component renders hamburger button
- Button only visible below lg breakpoint
- Clicking opens Sheet from left side
- Sheet contains SidebarNav with all navigation items
- Clicking a nav item closes the sheet
  </done>
</task>

<task type="auto">
  <name>Task 2: Create shared Header and integrate mobile nav into layout</name>
  <files>src/components/admin/Header.tsx, src/app/admin/layout.tsx, src/components/admin/SidebarNav.tsx</files>
  <action>
Create a shared header component and integrate everything into the admin layout.

**Header.tsx:**

A shared header that appears at the top of the main content area, containing:
- Mobile navigation trigger (hamburger)
- Page title (optional, can be set by pages)
- Theme toggle
- Logout button

```typescript
"use client";

import { ModeToggle } from "@/components/ui/mode-toggle";
import { Button } from "@/components/ui/button";
import { LogOut } from "lucide-react";
import { MobileNav } from "./MobileNav";
import { logout } from "@/app/admin/actions";

export function AdminHeader() {
  return (
    <header className="sticky top-0 z-30 flex h-16 items-center justify-between gap-4 border-b bg-background/80 backdrop-blur-sm px-4 lg:px-8">
      {/* Left side: mobile nav + page title space */}
      <div className="flex items-center gap-4">
        <MobileNav />
        {/* Page-specific title can be added by child pages if needed */}
      </div>

      {/* Right side: theme toggle + logout */}
      <div className="flex items-center gap-2">
        <ModeToggle />
        <form action={logout}>
          <Button variant="ghost" size="icon">
            <LogOut className="h-5 w-5" />
            <span className="sr-only">Logout</span>
          </Button>
        </form>
      </div>
    </header>
  );
}
```

**Update layout.tsx:**

Integrate Header and ensure proper responsive behavior.

```typescript
"use client";

import { Sidebar } from "@/components/admin/Sidebar";
import { AdminHeader } from "@/components/admin/Header";
import { useSidebarStore } from "@/lib/stores/sidebar-store";

export default function AdminLayout({ children }: { children: React.ReactNode }) {
  const { isCollapsed } = useSidebarStore();

  return (
    <div className="min-h-screen bg-background">
      {/* Desktop sidebar - hidden on mobile */}
      <div className="hidden lg:block">
        <Sidebar />
      </div>

      {/* Main content area with responsive margin */}
      <div
        className={cn(
          "min-h-screen transition-[margin] duration-200",
          "lg:ml-[240px]",
          isCollapsed && "lg:ml-[64px]"
        )}
      >
        <AdminHeader />
        <main>
          {children}
        </main>
      </div>
    </div>
  );
}
```

**Update SidebarNav.tsx:**

Add optional `onNavigate` callback prop:

```typescript
interface SidebarNavProps {
  isCollapsed: boolean;
  onNavigate?: () => void;
}

// In SidebarNavItem, update Link:
<Link href={href} onClick={onNavigate}>
```

**Key integration points:**
1. Sidebar only visible on desktop (hidden lg:block)
2. MobileNav only visible on mobile (lg:hidden in component)
3. Header is sticky and always visible
4. Main content margin adjusts based on sidebar collapse state (desktop only)
5. Theme toggle and logout accessible on all screen sizes
  </action>
  <verify>
```bash
# Header exists
grep -q "export function AdminHeader" src/components/admin/Header.tsx && echo "Header exported"
# Layout uses Header
grep -q "AdminHeader" src/app/admin/layout.tsx && echo "Layout uses Header"
# SidebarNav has onNavigate
grep -q "onNavigate" src/components/admin/SidebarNav.tsx && echo "SidebarNav has onNavigate"
# Build succeeds
npm run build 2>&1 | tail -5
```
  </verify>
  <done>
- Header component renders with mobile nav, theme toggle, and logout
- Layout renders Header above main content
- Sidebar visible on desktop, hidden on mobile
- MobileNav visible on mobile, hidden on desktop
- Main content margin adjusts when sidebar collapses
- Theme toggle works
- Logout works
  </done>
</task>

</tasks>

<verification>
```bash
# Build succeeds
npm run build

# Manual verification:
# Desktop (>= 1024px):
# 1. Sidebar visible on left
# 2. Header at top with theme toggle and logout
# 3. Hamburger menu NOT visible
# 4. Sidebar collapse/expand works

# Mobile (< 1024px):
# 1. Sidebar NOT visible
# 2. Hamburger menu visible in header
# 3. Tap hamburger - sheet slides in from left
# 4. Sheet contains all navigation items
# 5. Tap a nav item - sheet closes, page navigates
# 6. Theme toggle and logout still accessible in header
```
</verification>

<success_criteria>
1. MobileNav shows hamburger button on mobile only
2. Sheet opens from left with navigation items
3. Navigation items close sheet when clicked
4. Header contains theme toggle and logout
5. Desktop shows sidebar, mobile shows hamburger
6. Main content margin adjusts with sidebar collapse state
7. All interactions work correctly
8. Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/21-dashboard-hub-navigation/21-04-SUMMARY.md`
</output>
