---
phase: 26-chat-ui-conversation-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ai-wizard/AIFormWizard.tsx
  - src/components/ai-wizard/WizardStepIndicator.tsx
  - src/components/ai-wizard/steps/FormTypeStep.tsx
  - src/components/ai-wizard/steps/AudienceStep.tsx
autonomous: true

must_haves:
  truths:
    - "User can select form type from 5 options"
    - "User can select audience (External/Internal)"
    - "Wizard shows clear step progression"
    - "Back navigation preserves selections"
  artifacts:
    - path: "src/components/ai-wizard/AIFormWizard.tsx"
      provides: "Wizard container with state management"
      min_lines: 60
    - path: "src/components/ai-wizard/WizardStepIndicator.tsx"
      provides: "Visual step progression"
      min_lines: 30
    - path: "src/components/ai-wizard/steps/FormTypeStep.tsx"
      provides: "Form type selection UI"
      min_lines: 50
    - path: "src/components/ai-wizard/steps/AudienceStep.tsx"
      provides: "Audience selection UI"
      min_lines: 40
  key_links:
    - from: "AIFormWizard.tsx"
      to: "FormTypeStep.tsx"
      via: "renders based on wizard.step"
      pattern: "wizard\\.step.*form-type"
    - from: "AIFormWizard.tsx"
      to: "AudienceStep.tsx"
      via: "renders based on wizard.step"
      pattern: "wizard\\.step.*audience"
---

<objective>
Create the AI Form Wizard foundation with step indicator and structured selection steps (form type, audience).

Purpose: Establish the wizard container and first two steps that capture structured context BEFORE the user enters the conversational AI flow. This ensures the AI has form type and audience context for better generation.

Output: 4 React components implementing the wizard shell and first two selection steps.
</objective>

<execution_context>
@/Users/memehalis/.claude/get-shit-done/workflows/execute-plan.md
@/Users/memehalis/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-chat-ui-conversation-flow/26-RESEARCH.md

# Phase 25 infrastructure used by this plan
@src/lib/ai/system-prompt.ts
@src/components/ui/button.tsx
@src/components/ui/card.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Wizard Container and Step Indicator</name>
  <files>
    src/components/ai-wizard/AIFormWizard.tsx
    src/components/ai-wizard/WizardStepIndicator.tsx
  </files>
  <action>
Create the wizard container and visual step indicator.

**AIFormWizard.tsx:**
- 'use client' directive
- Define types: `FormType = 'application' | 'feedback' | 'registration' | 'survey' | 'other'`
- Define types: `Audience = 'external' | 'internal'`
- Define types: `WizardStep = 'form-type' | 'audience' | 'chat' | 'generating'`
- Interface WizardState: { step: WizardStep, formType: FormType | null, audience: Audience | null }
- Props: { apiKey: string, onComplete: (schema: unknown) => void, onCancel: () => void }
- useState for wizard state, initialized to { step: 'form-type', formType: null, audience: null }
- Handler functions: handleFormTypeSelect, handleAudienceSelect, handleBack
- Render WizardStepIndicator at top
- Conditional rendering based on wizard.step (for now, only form-type and audience steps)
- Wrap in Card with padding and max-width

**WizardStepIndicator.tsx:**
- Define WIZARD_STEPS array: [{ id: 'form-type', label: 'Form Type' }, { id: 'audience', label: 'Audience' }, { id: 'chat', label: 'Describe' }, { id: 'generating', label: 'Generate' }]
- Props: { currentStep: WizardStep }
- Calculate currentIndex from WIZARD_STEPS.findIndex
- Render horizontal stepper with:
  - Numbered circles (checkmark for complete, number for current/future)
  - Labels below circles
  - Connecting lines between steps
- Use cn() for conditional styling: primary for complete/current, muted for future
- Import Check icon from lucide-react
  </action>
  <verify>
    `pnpm build` passes without errors. Files exist at expected paths.
  </verify>
  <done>
    Wizard container renders with step indicator. Step indicator shows 4 steps with visual distinction between complete/current/future.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Form Type Selection Step</name>
  <files>
    src/components/ai-wizard/steps/FormTypeStep.tsx
  </files>
  <action>
Create the form type selection step.

**FormTypeStep.tsx:**
- Define FORM_TYPES array with: id, label, icon (from lucide-react), description
  - application: FileText, "Collect applications for opportunities"
  - feedback: MessageSquare, "Gather feedback and opinions"
  - registration: Calendar, "Event or program sign-ups"
  - survey: ClipboardList, "Research and data collection"
  - other: PlusCircle, "Something different"
- Props: { value: FormType | null, onSelect: (type: FormType) => void, onCancel: () => void }
- Layout:
  - Header: "What type of form do you need?" with subtitle
  - 2-column grid (1 col on mobile) of clickable cards
  - Each card shows icon, label, description
  - Selected card has border-primary and bg-accent
  - Footer with Cancel button (left) and Continue button (right, disabled if no selection)
- Use existing Button from @/components/ui/button
- Use cn() from @/lib/utils for conditional classes
- On card click, call onSelect(type.id) which also advances to next step
  </action>
  <verify>
    `pnpm build` passes without errors. Component exports FormTypeStep.
  </verify>
  <done>
    Form type selection shows 5 options with icons and descriptions. Clicking a card selects it visually and advances to the next step.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Audience Selection Step</name>
  <files>
    src/components/ai-wizard/steps/AudienceStep.tsx
  </files>
  <action>
Create the audience selection step.

**AudienceStep.tsx:**
- Define AUDIENCES array:
  - external: { id: 'external', label: 'External / Public', icon: Globe, description: 'Anyone can fill out this form (visitors, applicants)' }
  - internal: { id: 'internal', label: 'Internal / Team', icon: Users, description: 'Only team members or logged-in users' }
- Props: { value: Audience | null, onSelect: (audience: Audience) => void, onBack: () => void }
- Layout:
  - Header: "Who will fill out this form?" with subtitle
  - 2 large cards (stacked on mobile, side-by-side on sm+)
  - Each card shows icon, label, description with more prominence than form type cards
  - Selected card has border-primary and bg-accent
  - Footer with Back button (left, ghost variant) and Continue button (right, disabled if no selection)
- Use existing Button from @/components/ui/button
- Use cn() from @/lib/utils for conditional classes
- Use ArrowLeft icon for Back button
- On card click, call onSelect(audience.id) which advances to chat step
  </action>
  <verify>
    `pnpm build` passes without errors. Component exports AudienceStep.
  </verify>
  <done>
    Audience selection shows 2 options (External/Internal) with icons and descriptions. Back button returns to form type step with selection preserved. Continue advances to chat step.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `pnpm build` completes without errors
2. All 4 component files exist in src/components/ai-wizard/
3. No TypeScript errors (strict mode)
4. Components use existing shadcn/ui patterns and styles
</verification>

<success_criteria>
- AIFormWizard.tsx manages wizard state with form type and audience selections
- WizardStepIndicator.tsx shows 4-step progression with visual feedback
- FormTypeStep.tsx displays 5 form type options with selection UI
- AudienceStep.tsx displays 2 audience options with selection UI
- Navigation: Cancel exits wizard, Back goes to previous step, Continue advances
- All components follow existing codebase patterns (cn(), shadcn/ui components)
</success_criteria>

<output>
After completion, create `.planning/phases/26-chat-ui-conversation-flow/26-01-SUMMARY.md`
</output>
