---
phase: 07-mobile-optimization-deployment
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
  - src/components/ui/select.tsx
  - src/app/layout.tsx
  - src/hooks/useMobileKeyboard.ts
  - src/components/form/steps/ApplicantInfoStep.tsx
  - src/components/form/steps/ProposalStep.tsx
  - src/components/form/steps/RoadmapStep.tsx
  - src/components/form/steps/ImpactStep.tsx
  - src/components/form/steps/LogisticsStep.tsx
autonomous: true

must_haves:
  truths:
    - "All buttons and interactive elements have minimum 44x44px touch targets"
    - "Mobile keyboard does not obscure active input fields on iOS"
    - "Viewport meta enables proper mobile scaling and safe area insets"
  artifacts:
    - path: "src/components/ui/button.tsx"
      provides: "Touch-target-compliant button component"
      contains: "min-h-11"
    - path: "src/components/ui/input.tsx"
      provides: "Touch-target-compliant input with 44px height"
      contains: "min-h-11"
    - path: "src/components/ui/select.tsx"
      provides: "Touch-target-compliant select trigger"
      contains: "min-h-11"
    - path: "src/app/layout.tsx"
      provides: "Viewport configuration for mobile"
      contains: "viewport"
    - path: "src/hooks/useMobileKeyboard.ts"
      provides: "Keyboard scroll handler hook"
      exports: ["useMobileKeyboard"]
  key_links:
    - from: "src/components/form/steps/*Step.tsx"
      to: "src/hooks/useMobileKeyboard.ts"
      via: "onFocus handler"
      pattern: "useMobileKeyboard"
---

<objective>
Mobile-optimize all UI components for touch targets and keyboard handling

Purpose: Ensure the form and admin dashboard are fully usable on iOS and Android devices with proper touch targets (44x44px WCAG AAA) and keyboard behavior.

Output: Updated UI components with mobile-compliant touch targets, keyboard scroll handler hook, and viewport configuration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-mobile-optimization-deployment/07-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update UI Components for Touch Target Compliance</name>
  <files>
    src/components/ui/button.tsx
    src/components/ui/input.tsx
    src/components/ui/select.tsx
  </files>
  <action>
    Update shadcn/ui components to meet WCAG AAA 44px minimum touch target:

    **button.tsx:**
    - Add `min-h-11` to the base cva() classes (44px minimum height)
    - Keep existing h-9, h-8, h-10 for layout but min-h ensures touch target
    - For icon buttons, add `min-w-11` for both dimensions

    **input.tsx:**
    - Change `h-9` to `min-h-11` (from 36px to 44px minimum)
    - Keep existing padding classes for visual consistency

    **select.tsx (SelectTrigger):**
    - Change `data-[size=default]:h-9` to `data-[size=default]:min-h-11`
    - Change `data-[size=sm]:h-8` to `data-[size=sm]:min-h-10` (40px for small)

    These are minimum heights - actual height can be larger based on content.
  </action>
  <verify>
    Visually inspect components in browser dev tools:
    - Button default size >= 44px height
    - Input >= 44px height
    - Select trigger >= 44px height
    Run: npm run dev, inspect element heights at /apply
  </verify>
  <done>
    All interactive form elements meet 44px minimum touch target height
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Mobile Keyboard Scroll Handler</name>
  <files>
    src/hooks/useMobileKeyboard.ts
    src/components/form/steps/ApplicantInfoStep.tsx
    src/components/form/steps/ProposalStep.tsx
    src/components/form/steps/RoadmapStep.tsx
    src/components/form/steps/ImpactStep.tsx
    src/components/form/steps/LogisticsStep.tsx
  </files>
  <action>
    **Create src/hooks/useMobileKeyboard.ts:**
    ```typescript
    "use client";

    import { useCallback } from "react";

    /**
     * Hook to handle mobile keyboard scrolling
     * On iOS Safari, keyboard opens without resizing viewport,
     * which can hide the active input. This scrolls it into view.
     */
    export function useMobileKeyboard() {
      const handleFocus = useCallback(
        (e: React.FocusEvent<HTMLInputElement | HTMLTextAreaElement>) => {
          // Small delay allows keyboard animation to start
          setTimeout(() => {
            e.target.scrollIntoView({ behavior: "smooth", block: "center" });
          }, 100);
        },
        []
      );

      return { onFocus: handleFocus };
    }
    ```

    **Update each form step component:**
    Add the hook and spread `onFocus` to all Input and Textarea elements:

    1. Import: `import { useMobileKeyboard } from "@/hooks/useMobileKeyboard";`
    2. In component: `const { onFocus } = useMobileKeyboard();`
    3. Add to each Input/Textarea: `onFocus={onFocus}`

    For components using Controller (like Select), no change needed - Select is not affected by keyboard.
  </action>
  <verify>
    Run: npm run dev
    Test on mobile simulator or real device:
    - Focus an input field
    - Verify it scrolls to center of visible area when keyboard opens
    No TypeScript errors: npm run build
  </verify>
  <done>
    All text inputs scroll into view when focused on mobile devices
  </done>
</task>

<task type="auto">
  <name>Task 3: Configure Viewport and Safe Area</name>
  <files>
    src/app/layout.tsx
  </files>
  <action>
    Add Next.js viewport export for proper mobile behavior:

    1. Import Viewport type: `import type { Viewport } from "next";`

    2. Add viewport export after metadata:
    ```typescript
    export const viewport: Viewport = {
      width: "device-width",
      initialScale: 1,
      maximumScale: 5, // Allow pinch zoom for accessibility
      viewportFit: "cover", // Enable safe-area-inset for notched devices
    };
    ```

    3. Update metadata title/description while here:
    ```typescript
    export const metadata: Metadata = {
      title: "Floor Lead Application | Frontier Tower",
      description: "Apply to lead a themed floor at Frontier Tower",
    };
    ```

    Note: Do NOT add user-scalable=no - that harms accessibility.
  </action>
  <verify>
    Run: npm run dev
    View page source or inspect head - viewport meta should show:
    - width=device-width
    - initial-scale=1
    - maximum-scale=5
    - viewport-fit=cover
    No build errors: npm run build
  </verify>
  <done>
    Viewport configured for proper mobile scaling and safe area handling
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Run `npm run build` - no TypeScript errors
2. Run `npm run dev` and test at /apply on mobile viewport (Chrome DevTools)
3. All buttons, inputs, selects visually meet 44px touch target
4. Form inputs scroll into view when focused
5. Page renders correctly in mobile device simulation
</verification>

<success_criteria>
- All interactive elements have minimum 44x44px touch targets (WCAG AAA)
- Mobile keyboard handling prevents input obstruction
- Viewport meta properly configured for mobile devices
- No regressions in desktop layout
- Build succeeds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/07-mobile-optimization-deployment/07-01-SUMMARY.md`
</output>
