---
phase: 03-form-ui-static
plan: 05
type: execute
wave: 4
depends_on: ["03-04"]
files_modified:
  - src/components/form/StepContent.tsx
  - src/components/form/NavigationButtons.tsx
autonomous: false

must_haves:
  truths:
    - "StepContent routes to correct step component based on currentStep"
    - "User can complete entire form flow from welcome to confirmation"
    - "Form submission creates record visible in Convex dashboard"
    - "All validation errors display correctly inline"
  artifacts:
    - path: "src/components/form/StepContent.tsx"
      provides: "Step routing to all 8 step components"
  key_links:
    - from: "src/components/form/StepContent.tsx"
      to: "src/components/form/steps/*.tsx"
      via: "switch statement on step prop"
      pattern: "WelcomeStep|ApplicantInfoStep|ProposalStep"
---

<objective>
Update StepContent to route to actual step components and update NavigationButtons for isSubmitting prop. Then verify the complete form flow works.

Purpose: StepContent is the router that displays the correct step component. NavigationButtons needs the isSubmitting prop for submit button state. Human verification confirms the entire flow works from start to finish.

Output: Complete, functional multi-step form with all steps rendering correctly.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-form-ui-static/03-RESEARCH.md
@.planning/phases/03-form-ui-static/03-04-SUMMARY.md

# All step components
@src/components/form/steps/WelcomeStep.tsx
@src/components/form/steps/ApplicantInfoStep.tsx
@src/components/form/steps/ProposalStep.tsx
@src/components/form/steps/RoadmapStep.tsx
@src/components/form/steps/ImpactStep.tsx
@src/components/form/steps/LogisticsStep.tsx
@src/components/form/steps/ReviewStep.tsx
@src/components/form/steps/ConfirmationStep.tsx

# Shell components
@src/components/form/StepContent.tsx (needs update)
@src/components/form/NavigationButtons.tsx (needs isSubmitting prop)
@src/components/form/MultiStepForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update StepContent to route to step components</name>
  <files>src/components/form/StepContent.tsx</files>
  <action>
Replace the placeholder StepContent with a router that renders the correct step component.

```typescript
// src/components/form/StepContent.tsx
"use client";

import { WelcomeStep } from "./steps/WelcomeStep";
import { ApplicantInfoStep } from "./steps/ApplicantInfoStep";
import { ProposalStep } from "./steps/ProposalStep";
import { RoadmapStep } from "./steps/RoadmapStep";
import { ImpactStep } from "./steps/ImpactStep";
import { LogisticsStep } from "./steps/LogisticsStep";
import { ReviewStep } from "./steps/ReviewStep";
import { ConfirmationStep } from "./steps/ConfirmationStep";

interface StepContentProps {
  step: number;
}

/**
 * StepContent component
 *
 * Routes to the appropriate step component based on current step number.
 *
 * Steps:
 * 0 - Welcome (hero, no form)
 * 1 - Applicant Info
 * 2 - Proposal
 * 3 - Roadmap
 * 4 - Impact
 * 5 - Logistics
 * 6 - Review
 * 7 - Confirmation
 */
export function StepContent({ step }: StepContentProps) {
  switch (step) {
    case 0:
      return <WelcomeStep />;
    case 1:
      return <ApplicantInfoStep />;
    case 2:
      return <ProposalStep />;
    case 3:
      return <RoadmapStep />;
    case 4:
      return <ImpactStep />;
    case 5:
      return <LogisticsStep />;
    case 6:
      return <ReviewStep />;
    case 7:
      return <ConfirmationStep />;
    default:
      return (
        <div className="py-12 text-center">
          <p className="text-muted-foreground">Invalid step</p>
        </div>
      );
  }
}
```

Key points:
- Simple switch statement maps step number to component
- Each step component is responsible for its own UI
- Invalid steps show error message (defensive coding)
  </action>
  <verify>
Component imports and routes all steps:
- `grep -c "import.*Step" src/components/form/StepContent.tsx` returns 8
- `grep -c "case" src/components/form/StepContent.tsx` returns 8
- `npx tsc --noEmit`
  </verify>
  <done>
StepContent routes to all 8 step components based on step number.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update NavigationButtons for isSubmitting prop</name>
  <files>src/components/form/NavigationButtons.tsx</files>
  <action>
Update NavigationButtons to accept isSubmitting prop and disable submit button during submission.

Read the current NavigationButtons.tsx and update it to:
1. Add NavigationButtonsProps interface with optional isSubmitting prop
2. Destructure isSubmitting with default false
3. Update the submit button (on step 6) to be disabled when isSubmitting
4. Show "Submitting..." text when isSubmitting

The key changes are:
- Add interface: `interface NavigationButtonsProps { isSubmitting?: boolean; }`
- Update function signature: `export function NavigationButtons({ isSubmitting = false }: NavigationButtonsProps)`
- Update submit button: `disabled={isSubmitting}` and conditional text `{isSubmitting ? "Submitting..." : "Submit Application"}`

If the component already handles this or has a different structure, adapt accordingly while maintaining the isSubmitting behavior.
  </action>
  <verify>
Component handles isSubmitting:
- `grep -c "isSubmitting" src/components/form/NavigationButtons.tsx` returns 3+
- `grep "Submitting" src/components/form/NavigationButtons.tsx` returns match
- `npx tsc --noEmit`
  </verify>
  <done>
NavigationButtons accepts isSubmitting prop, disables submit button, and shows loading text during submission.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete multi-step form with:
- 8 step components (Welcome, Applicant Info, Proposal, Roadmap, Impact, Logistics, Review, Confirmation)
- Floor dropdown with all Frontier Tower floors + "Other" conditional field
- Form validation with inline error messages
- Review step with data display and edit links
- Convex submission that creates database record
- Confirmation step with thank you message
  </what-built>
  <how-to-verify>
1. Start dev servers if not running:
   - Terminal 1: `npm run dev` (Next.js on http://localhost:3000)
   - Terminal 2: `npx convex dev` (Convex backend)

2. Open http://localhost:3000/apply in browser

3. Test Welcome step (step 0):
   - FT logo displays
   - "Become a Floor Lead" headline visible
   - "Begin" button advances to step 1

4. Test Applicant Info step (step 1):
   - All 5 fields render (fullName, email, LinkedIn, role, bio)
   - Try clicking "Next" with empty fields - validation errors appear inline
   - Fill in valid data (bio needs 50+ chars)
   - "Next" advances to step 2

5. Test Proposal step (step 2):
   - Floor dropdown shows all 11 options
   - Select "Other (propose a new floor)" - text field appears below
   - Fill all required fields
   - "Next" advances to step 3

6. Test remaining input steps (3, 4, 5):
   - Each step renders correct fields
   - Validation works
   - Can navigate forward and back

7. Test Review step (step 6):
   - All entered data displays in 5 sections
   - Click "Edit" button - jumps to correct step
   - Navigate back to Review

8. Test submission (step 6 -> 7):
   - Click "Submit Application"
   - Button shows "Submitting..." briefly
   - Confirmation step appears with checkmark and thank you message

9. Verify Convex database:
   - Open Convex dashboard (URL shown in convex dev output)
   - Go to Data > applications table
   - New record exists with all submitted data
   - Status is "new"
   - submittedAt has timestamp

10. Test localStorage clearing:
    - After submission, refresh the page
    - Form should reset to step 0 (Welcome)
    - No old data persisted
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
Phase 3 complete verification:
1. All 8 step components exist in src/components/form/steps/
2. StepContent routes to correct component for each step
3. Form submission creates record in Convex
4. Human verified complete flow works
</verification>

<success_criteria>
- User can complete entire form flow from welcome screen to confirmation
- Floor dropdown shows all Frontier Tower floors with "Other" option that reveals text field
- Review step displays all entered data accurately before submission
- Submitting form creates a new record visible in Convex dashboard
- Confirmation screen appears with thank you message after successful submission
</success_criteria>

<output>
After completion, create `.planning/phases/03-form-ui-static/03-05-SUMMARY.md`
</output>
