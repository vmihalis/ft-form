---
phase: 17-legacy-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/admin/AdminTabs.tsx
  - src/components/admin/AdminDashboard.tsx
autonomous: true

must_haves:
  truths:
    - "Admin dashboard has only Submissions and Forms tabs (no Applications tab)"
    - "Admin dashboard default tab is submissions"
    - "Build passes with no TypeScript errors"
  artifacts:
    - path: "src/components/admin/AdminTabs.tsx"
      provides: "Tab navigation without legacy applications"
      contains: "TabsTrigger value=\"submissions\""
    - path: "src/components/admin/AdminDashboard.tsx"
      provides: "Dashboard without legacy application state"
  key_links:
    - from: "src/components/admin/AdminDashboard.tsx"
      to: "src/components/admin/AdminTabs.tsx"
      via: "component composition"
      pattern: "<AdminTabs"
---

<objective>
Remove the Applications tab from the admin dashboard, making Submissions the default view.

Purpose: This is the entry point modification that allows safe deletion of all legacy application components in Plan 02. The admin panel will only show dynamic form submissions going forward.

Output: Modified AdminTabs.tsx and AdminDashboard.tsx with no references to legacy applications.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-legacy-cleanup/17-RESEARCH.md

@src/components/admin/AdminTabs.tsx
@src/components/admin/AdminDashboard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove legacy application state and props from AdminDashboard</name>
  <files>src/components/admin/AdminDashboard.tsx</files>
  <action>
Modify AdminDashboard.tsx to remove all legacy application state:

1. Remove the import of `Doc` from convex (no longer needed)
2. Remove `selectedApplication` state (useState with Doc<"applications">)
3. Remove `sheetOpen` state for applications
4. Remove `handleApplicationSelect` function
5. Remove all props passed to AdminTabs related to applications:
   - selectedApplication
   - sheetOpen
   - onApplicationSelect
   - onSheetOpenChange

The component should become much simpler - just wrapping AdminTabs in Suspense with no state management (submissions state is handled internally by AdminTabs).

Final component should look approximately like:
```tsx
"use client";

import { Suspense } from "react";
import { AdminTabs } from "./AdminTabs";
import { Skeleton } from "@/components/ui/skeleton";

export function AdminDashboard() {
  return (
    <Suspense fallback={<Skeleton className="h-10 w-96" />}>
      <AdminTabs />
    </Suspense>
  );
}
```
  </action>
  <verify>TypeScript compiles with no errors: `npx tsc --noEmit`</verify>
  <done>AdminDashboard.tsx has no references to "applications", "selectedApplication", or Doc<"applications"></done>
</task>

<task type="auto">
  <name>Task 2: Remove Applications tab and related code from AdminTabs</name>
  <files>src/components/admin/AdminTabs.tsx</files>
  <action>
Modify AdminTabs.tsx to remove all legacy applications functionality:

1. Remove imports:
   - ApplicationsTable
   - ApplicationSheet
   - Doc and Id from convex (if only used for applications)

2. Remove the AdminTabsProps interface entirely (component now takes no props)

3. Remove props from function signature - AdminTabs becomes a no-props component

4. Update default tab from "applications" to "submissions":
   - Change: `const currentTab = searchParams.get("tab") || "applications"`
   - To: `const currentTab = searchParams.get("tab") || "submissions"`

5. Update handleTabChange to treat "submissions" as default:
   - Change the condition from `if (value === "applications")`
   - To: `if (value === "submissions")`

6. Remove from JSX:
   - TabsTrigger for "applications"
   - TabsContent for "applications" (contains ApplicationsTable)
   - ApplicationSheet component at bottom

7. Keep all submissions and forms functionality intact

Final tabs should be: Submissions (default), Forms
  </action>
  <verify>
1. `npx tsc --noEmit` passes
2. `npm run build` succeeds
  </verify>
  <done>AdminTabs.tsx has only Submissions and Forms tabs, defaults to Submissions, no references to ApplicationsTable or ApplicationSheet</done>
</task>

<task type="auto">
  <name>Task 3: Verify build and runtime</name>
  <files>N/A</files>
  <action>
Run full build verification:

1. Run `npm run build` to ensure Next.js builds successfully
2. Run `npm run dev` briefly and navigate to /admin to confirm:
   - Page loads without errors
   - Only two tabs visible: Submissions, Forms
   - Submissions tab is active by default
   - Clicking Forms tab works
3. Check browser console for any errors
  </action>
  <verify>
1. `npm run build` exits with code 0
2. Admin page at localhost:3000/admin loads with Submissions as default tab
  </verify>
  <done>Build passes, admin dashboard works with only Submissions and Forms tabs</done>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. No TypeScript errors in AdminTabs.tsx or AdminDashboard.tsx
3. Admin dashboard shows only Submissions and Forms tabs
4. Default tab is Submissions (not Applications)
5. grep -r "ApplicationsTable\|ApplicationSheet" src/components/admin/Admin shows no matches in AdminTabs.tsx or AdminDashboard.tsx
</verification>

<success_criteria>
- Admin dashboard renders with only Submissions and Forms tabs
- Submissions is the default tab when visiting /admin
- Build passes with zero errors
- No runtime errors in browser console
- Legacy application components are no longer imported (but files still exist - deleted in Plan 02)
</success_criteria>

<output>
After completion, create `.planning/phases/17-legacy-cleanup/17-01-SUMMARY.md`
</output>
