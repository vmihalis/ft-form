---
phase: 09-inline-editing-ui
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified:
  - src/components/admin/ApplicationSheet.tsx
autonomous: false

must_haves:
  truths:
    - "All 19 form fields are editable inline in the detail panel"
    - "Clicking any field enters edit mode"
    - "Changes persist after save and page refresh"
    - "Visual edit states are consistent across all fields"
    - "Validation works correctly for email, URL, and required fields"
    - "Sheet header displays initiativeName/tagline reactively (not editable directly)"
    - "linkedIn field displays as plain text when not editing"
  artifacts:
    - path: "src/components/admin/ApplicationSheet.tsx"
      provides: "Detail panel with inline editing for all fields"
      min_lines: 100
  key_links:
    - from: "src/components/admin/ApplicationSheet.tsx"
      to: "src/components/admin/EditableField.tsx"
      via: "Component import and usage"
      pattern: "EditableField.*field="
    - from: "src/components/admin/ApplicationSheet.tsx"
      to: "src/lib/constants/floors.ts"
      via: "FRONTIER_TOWER_FLOORS for floor select options"
      pattern: "FRONTIER_TOWER_FLOORS"
    - from: "src/components/admin/ApplicationSheet.tsx"
      to: "src/lib/constants/estimatedSizes.ts"
      via: "ESTIMATED_SIZES for estimatedSize select options"
      pattern: "ESTIMATED_SIZES"
---

<objective>
Integrate EditableField into ApplicationSheet, replacing all read-only Field usages with editable variants.

Purpose: Enable admins to edit any of the 19 application fields directly from the detail panel.

Output: ApplicationSheet with inline editing for all fields, using proper input types and validation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-inline-editing-ui/09-01-SUMMARY.md

# Files to modify
@src/components/admin/ApplicationSheet.tsx

# Components to use
@src/components/admin/EditableField.tsx
@src/lib/constants/floors.ts
@src/lib/constants/estimatedSizes.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace Field with EditableField throughout ApplicationSheet</name>
  <files>src/components/admin/ApplicationSheet.tsx</files>
  <action>
Update ApplicationSheet.tsx to use EditableField for all 19 editable fields.

**Field count breakdown:** 5 (Applicant) + 7 (Proposal) + 3 (Roadmap) + 1 (Impact) + 3 (Logistics) = 19 fields

**Keep unchanged:**
- Sheet, SheetContent, SheetHeader, SheetTitle, SheetDescription structure
- Section component (still useful for grouping)
- StatusDropdown (has its own edit pattern)
- Separator usage
- Footer with submission date (not editable)

**Remove:**
- The read-only `Field` component definition (lines 21-29)

**Add imports:**
```typescript
import { EditableField } from "./EditableField";
import { FRONTIER_TOWER_FLOORS } from "@/lib/constants/floors";
import { ESTIMATED_SIZES } from "@/lib/constants/estimatedSizes";
```

**Replace each Field usage with EditableField:**

**Applicant Information Section (5 fields):**
```tsx
<EditableField
  applicationId={application._id}
  field="fullName"
  label="Name"
  value={application.fullName}
  type="text"
/>
<EditableField
  applicationId={application._id}
  field="email"
  label="Email"
  value={application.email}
  type="email"
/>
<EditableField
  applicationId={application._id}
  field="linkedIn"
  label="LinkedIn"
  value={application.linkedIn}
  type="url"
  required={false}
/>
<EditableField
  applicationId={application._id}
  field="role"
  label="Role"
  value={application.role}
  type="text"
/>
<EditableField
  applicationId={application._id}
  field="bio"
  label="Bio"
  value={application.bio}
  type="textarea"
/>
```

**Proposal Section (7 fields):**
```tsx
<EditableField
  applicationId={application._id}
  field="floor"
  label="Floor"
  value={application.floor}
  type="select"
  options={FRONTIER_TOWER_FLOORS.map(f => ({ value: f.value, label: f.label }))}
/>
<EditableField
  applicationId={application._id}
  field="initiativeName"
  label="Initiative Name"
  value={application.initiativeName}
  type="text"
/>
<EditableField
  applicationId={application._id}
  field="tagline"
  label="Tagline"
  value={application.tagline}
  type="text"
  maxLength={100}
/>
<EditableField
  applicationId={application._id}
  field="values"
  label="Core Values"
  value={application.values}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="targetCommunity"
  label="Target Community"
  value={application.targetCommunity}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="estimatedSize"
  label="Estimated Community Size"
  value={application.estimatedSize}
  type="select"
  options={ESTIMATED_SIZES.map(s => ({ value: s.value, label: s.label }))}
/>
<EditableField
  applicationId={application._id}
  field="additionalNotes"
  label="Additional Notes"
  value={application.additionalNotes}
  type="textarea"
  required={false}
/>
```

**Roadmap Section (3 fields):**
```tsx
<EditableField
  applicationId={application._id}
  field="phase1Mvp"
  label="Phase 1: MVP (First 3 months)"
  value={application.phase1Mvp}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="phase2Expansion"
  label="Phase 2: Expansion (3-6 months)"
  value={application.phase2Expansion}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="phase3LongTerm"
  label="Phase 3: Long-term (6+ months)"
  value={application.phase3LongTerm}
  type="textarea"
/>
```

**Impact Section (1 field):**
```tsx
<EditableField
  applicationId={application._id}
  field="benefitToFT"
  label="Benefit to Frontier Tower"
  value={application.benefitToFT}
  type="textarea"
/>
```

**Logistics Section (3 fields):**
```tsx
<EditableField
  applicationId={application._id}
  field="existingCommunity"
  label="Existing Community"
  value={application.existingCommunity}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="spaceNeeds"
  label="Space Needs"
  value={application.spaceNeeds}
  type="textarea"
/>
<EditableField
  applicationId={application._id}
  field="startDate"
  label="Earliest Start Date"
  value={application.startDate}
  type="date"
/>
```

**Note on startDate:** The current code formats startDate with `new Date().toLocaleDateString()`. The EditableField should store/display the raw ISO date string. The date input will handle formatting automatically.

**Note on linkedIn:** For MVP, the linkedIn field will display as plain text when not in edit mode (not as a clickable link). This simplifies EditableField implementation. Clickable link rendering can be added as a future enhancement with a `renderLink` prop if needed.

**Note on Sheet header (initiativeName/tagline):** The Sheet header currently displays initiativeName and tagline from the application props. These header displays are NOT editable directly - they are display-only and will update automatically via Convex reactive props when the editable fields in the Proposal section are saved. Do NOT make the header elements editable; editing happens only in the Proposal section.

**Note on tagline placement:** Currently, tagline only appears in the SheetDescription header (line 67 of ApplicationSheet.tsx), not as a Field in the Proposal section body. This plan ADDS tagline as an EditableField in the Proposal section (after initiativeName, with maxLength={100}). The header tagline display will update reactively when the Proposal section field is edited.

**Spacing:** Wrap EditableField usages in the same `<div className="space-y-3">` structure used currently for proper vertical spacing.
  </action>
  <verify>
1. No more Field component usage: `grep -c "function Field" src/components/admin/ApplicationSheet.tsx` should return 0
2. EditableField imported: `grep "import.*EditableField" src/components/admin/ApplicationSheet.tsx`
3. All 19 fields converted: `grep -c "EditableField" src/components/admin/ApplicationSheet.tsx` should return 19+
4. TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>
- All 19 form fields use EditableField component
- Field types match field requirements (email, url, textarea, select, date)
- Select fields have proper options arrays
- Required/optional flags set correctly
- Old Field component removed
- linkedIn displays as plain text (not clickable link) for MVP
- Sheet header updates reactively when Proposal section fields are edited
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Inline editing for all 19 application fields in the admin detail panel</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Go to https://localhost:3000/admin/login and log in
3. Click on any application to open the detail sheet
4. **Test hover state:** Hover over any field - pencil icon should appear
5. **Test edit mode:** Click on "Name" field - should show input with ring border
6. **Test save:** Change the name, press Enter or click outside - should save
7. **Test cancel:** Click another field, press Escape - should revert
8. **Test validation:** Edit email field, enter invalid email, try to save - should show error
9. **Test textarea:** Edit "Bio" field - should show textarea, Ctrl+Enter to save
10. **Test select:** Click "Floor" field - should show dropdown with floor options
11. **Test date:** Click "Earliest Start Date" - should show date picker
12. **Test persistence:** Refresh page - edited values should persist
13. **Test header reactivity:** Edit "Initiative Name" in Proposal section - Sheet header should update automatically after save
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. **All fields editable:**
   - Count EditableField usages matches expected 19

2. **Correct field types:**
   - email field uses type="email"
   - linkedIn uses type="url"
   - floor and estimatedSize use type="select"
   - startDate uses type="date"
   - Multi-line fields use type="textarea"

3. **Build passes:**
   - `npm run build` completes without errors

4. **Functional test:**
   - Human verification of edit workflow
</verification>

<success_criteria>
- All 19 application fields are editable inline
- Each field uses appropriate input type
- Save/cancel keyboard shortcuts work
- Validation prevents invalid saves
- Changes persist to database
- Sheet header updates reactively when fields are edited
- Human verification confirms UX is correct
</success_criteria>

<output>
After completion, create `.planning/phases/09-inline-editing-ui/09-02-SUMMARY.md`
</output>
